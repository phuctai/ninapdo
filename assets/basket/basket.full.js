(function(){"use strict";function i(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function u(t){return t._promiseCallbacks||(t._promiseCallbacks={})}function t(t,e){return"onerror"===t?void j.on("error",e):2!==arguments.length?j[t]:void(j[t]=e)}function c(t){return"function"==typeof t}function e(){}function v(){}function s(t,r,o){j.async(function(e){var n=!1,t=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(o,r,function(t){n||(n=!0,(r!==t?_:f)(e,t))},function(t){n||(n=!0,m(e,t))},e._label);!n&&t&&(n=!0,m(e,t))},t)}function r(t,e){var n,r,o;e.constructor===t.constructor?(r=t,(o=e)._state===q?f(r,o._result):o._state===M?(o._onError=null,m(r,o._result)):a(o,void 0,function(t){(o!==t?_:f)(r,t)},function(t){m(r,t)})):(n=function(t){try{return t.then}catch(t){return V.error=t,V}}(e))===V?m(t,V.error):void 0!==n&&c(n)?s(t,e,n):f(t,e)}function _(t,e){var n;t===e?f(t,e):("function"==typeof(n=e)||"object"==typeof n&&null!==n?r:f)(t,e)}function n(t){t._onError&&t._onError(t._result),l(t)}function f(t,e){t._state===N&&(t._result=e,t._state=q,0===t._subscribers.length?j.instrument&&P("fulfilled",t):j.async(l,t))}function m(t,e){t._state===N&&(t._state=M,t._result=e,j.async(n,t))}function a(t,e,n,r){var o=t._subscribers,i=o.length;t._onError=null,o[i]=e,o[i+q]=n,o[i+M]=r,0===i&&t._state&&j.async(l,t)}function l(t){var e=t._subscribers,n=t._state;if(j.instrument&&P(n===q?"fulfilled":"rejected",t),0!==e.length){for(var r,o,i=t._result,u=0;u<e.length;u+=3)r=e[u],o=e[u+n],r?h(n,r,o,i):o(i);t._subscribers.length=0}}function o(){this.error=null}function h(t,e,n,r){var o,i,u,s,a=c(n);if(a){if((o=function(t,e){try{return t(e)}catch(t){return D.error=t,D}}(n,r))===D?(s=!0,i=o.error,o=null):u=!0,e===o)return m(e,new TypeError("A promises callback cannot return that same promise.")),0}else o=r,u=!0;e._state!==N||(a&&u?_(e,o):s?m(e,i):t===q?f(e,o):t===M&&m(e,o))}function p(t,e,n){return t===q?{state:"fulfilled",value:n}:{state:"rejected",reason:n}}function d(t,e,n,r){this._instanceConstructor=t,this.promise=new t(v,r),this._abortOnReject=n,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?f(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&f(this.promise,this._result))):m(this.promise,this._validationError())}function y(t,e){this._id=L++,this._label=e,this._state=void 0,this._result=void 0,this._subscribers=[],j.instrument&&P("created",this),v!==t&&(c(t)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof y||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(e,t){var n=!1;try{t(function(t){n||(n=!0,_(e,t))},function(t){n||(n=!0,m(e,t))})}catch(t){m(e,t)}}(this,t))}function g(){this.value=void 0}function w(t,e,n){try{t.apply(e,n)}catch(t){return W.value=t,W}}function b(t,e,n){this._superConstructor(t,e,!1,n)}function E(t,e,n){this._superConstructor(t,e,!0,n)}function k(t,e,n){this._superConstructor(t,e,!1,n)}function x(){return function(){setTimeout(A,1)}}function A(){for(var t=0;t<yt;t+=2){(0,bt[t])(bt[t+1]),bt[t]=void 0,bt[t+1]=void 0}yt=0}function S(){j.on.apply(j,arguments)}var T={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(t,e){var n=u(this),r=n[t];-1===i(r=r||(n[t]=[]),e)&&r.push(e)},off:function(t,e){var n,r,o=u(this);return e?void(-1!==(r=i(n=o[t],e))&&n.splice(r,1)):void(o[t]=[])},trigger:function(t,e){var n;if(n=u(this)[t])for(var r=0;r<n.length;r++)(0,n[r])(e)}},j={instrument:!1};T.mixin(j);var O=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},C=Date.now||function(){return(new Date).getTime()},I=Object.create||function(t){if(1<arguments.length)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return e.prototype=t,new e},R=[],P=function(t,e,n){1===R.push({name:t,payload:{key:e._guidKey,id:e._id,eventName:t,detail:e._result,childId:n&&n._id,label:e._label,timeStamp:C(),error:j["instrument-with-stack"]?new Error(e._label):null}})&&setTimeout(function(){for(var t,e=0;e<R.length;e++){var n=(t=R[e]).payload;n.guid=n.key+n.id,n.childGuid=n.key+n.childId,n.error&&(n.stack=n.error.stack),j.trigger(t.name,t.payload)}R.length=0},50)},N=void 0,q=1,M=2,V=new o,D=new o,H=d;d.prototype._validateInput=function(t){return O(t)},d.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},d.prototype._init=function(){this._result=new Array(this.length)},d.prototype._enumerate=function(){for(var t=this.length,e=this.promise,n=this._input,r=0;e._state===N&&r<t;r++)this._eachEntry(n[r],r)},d.prototype._eachEntry=function(t,e){var n,r=this._instanceConstructor;"object"==typeof(n=t)&&null!==n?t.constructor===r&&t._state!==N?(t._onError=null,this._settledAt(t._state,e,t._result)):this._willSettleAt(r.resolve(t),e):(this._remaining--,this._result[e]=this._makeResult(q,e,t))},d.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===N&&(this._remaining--,this._abortOnReject&&t===M?m(r,n):this._result[e]=this._makeResult(t,e,n)),0===this._remaining&&f(r,this._result)},d.prototype._makeResult=function(t,e,n){return n},d.prototype._willSettleAt=function(t,e){var n=this;a(t,void 0,function(t){n._settledAt(q,e,t)},function(t){n._settledAt(M,e,t)})};function U(t,e){return new H(this,t,!0,e).promise}function Y(t,e){function n(t){_(o,t)}function r(t){m(o,t)}var o=new this(v,e);if(!O(t))return m(o,new TypeError("You must pass an array to race.")),o;for(var i=t.length,u=0;o._state===N&&u<i;u++)a(this.resolve(t[u]),void 0,n,r);return o}function J(t,e){if(t&&"object"==typeof t&&t.constructor===this)return t;var n=new this(v,e);return _(n,t),n}function K(t,e){var n=new this(v,e);return m(n,t),n}var G="rsvp_"+C()+"-",L=0,B=y;y.cast=J,y.all=U,y.race=Y,y.resolve=J,y.reject=K,y.prototype={constructor:y,_guidKey:G,_onError:function(e){j.async(function(t){setTimeout(function(){t._onError&&j.trigger("error",e)},0)},this)},then:function(t,e,n){var r=this,o=r._state;if(o===q&&!t||o===M&&!e)return j.instrument&&P("chained",this,this),this;r._onError=null;var i,u=new this.constructor(v,n),s=r._result;return j.instrument&&P("chained",r,u),o?(i=arguments[o-1],j.async(function(){h(o,u,i,s)})):a(r,u,t,e),u},catch:function(t,e){return this.then(null,t,e)},finally:function(e,t){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})},t)}};function F(d,y){function t(){for(var t,e,n=arguments.length,r=new Array(n+1),o=!1,i=0;i<n;++i){if(t=arguments[i],!o){if((o=!(!(e=t)||"object"!=typeof e)&&(e.constructor===B||function(t){try{return t.then}catch(t){return W.value=t,W}}(e)))===X){var u=new B(v);return m(u,X.value),u}o&&!0!==o&&(t=function(n,r){return{then:function(t,e){return n.call(r,t,e)}}}(o,t))}r[i]=t}var s,a,c,f,l,h,p=new B(v);return r[n]=function(t,e){t?m(p,t):void 0===y?_(p,e):!0===y?_(p,function(t){for(var e=t.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=t[r];return n}(arguments)):O(y)?_(p,function(t,e){for(var n,r={},o=t.length,i=new Array(o),u=0;u<o;u++)i[u]=t[u];for(n=0;n<e.length;n++)r[e[n]]=i[n+1];return r}(arguments,y)):_(p,e)},o?(c=p,f=r,l=d,h=this,B.all(f).then(function(t){var e=w(l,h,t);return e===W&&m(c,e.value),c})):(s=p,(a=w(d,this,r))===W&&m(s,a.value),s)}return t.__proto__=d,t}function Q(t,e){return B.all(t,e)}var W=new g,X=new g;(b.prototype=I(H.prototype))._superConstructor=H,b.prototype._makeResult=p,b.prototype._validationError=function(){return new Error("allSettled must be called with an array")};function $(t,e){return new b(B,t,e).promise}function z(t,e){return B.race(t,e)}var Z=E;(E.prototype=I(H.prototype))._superConstructor=H,E.prototype._init=function(){this._result={}},E.prototype._validateInput=function(t){return t&&"object"==typeof t},E.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},E.prototype._enumerate=function(){var t=this.promise,e=this._input,n=[];for(var r in e)t._state===N&&e.hasOwnProperty(r)&&n.push({position:r,entry:e[r]});var o=n.length;this._remaining=o;for(var i,u=0;t._state===N&&u<o;u++)i=n[u],this._eachEntry(i.entry,i.position)};function tt(t,e){return new Z(B,t,e).promise}(k.prototype=I(Z.prototype))._superConstructor=H,k.prototype._makeResult=p,k.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};function et(t,e){return new k(B,t,e).promise}function nt(t){throw setTimeout(function(){throw t}),t}function rt(t){var n={};return n.promise=new B(function(t,e){n.resolve=t,n.reject=e},t),n}function ot(t,o,i){return B.all(t,i).then(function(t){if(!c(o))throw new TypeError("You must pass a function as map's second argument.");for(var e=t.length,n=new Array(e),r=0;r<e;r++)n[r]=o(t[r]);return B.all(n,i)})}function it(t,e){return B.resolve(t,e)}function ut(t,e){return B.reject(t,e)}function st(t,n,r){return B.all(t,r).then(function(o){if(!c(n))throw new TypeError("You must pass a function as filter's second argument.");for(var i=o.length,t=new Array(i),e=0;e<i;e++)t[e]=n(o[e]);return B.all(t,r).then(function(t){for(var e=new Array(i),n=0,r=0;r<i;r++)t[r]&&(e[n]=o[r],n++);return e.length=n,e})})}function at(t,e){bt[yt]=t,bt[yt+1]=e,2===(yt+=2)&&Et()}var ct,ft,lt,ht,pt,dt,yt=0,vt="undefined"!=typeof window?window:void 0,_t=vt||{},mt=_t.MutationObserver||_t.WebKitMutationObserver,gt="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),wt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,bt=new Array(1e3),Et=gt?(pt=process.nextTick,dt=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(dt)&&"0"===dt[1]&&"10"===dt[2]&&(pt=setImmediate),function(){pt(A)}):mt?(ft=0,lt=new mt(A),ht=document.createTextNode(""),lt.observe(ht,{characterData:!0}),function(){ht.data=ft=++ft%2}):wt?((ct=new MessageChannel).port1.onmessage=A,function(){ct.port2.postMessage(0)}):(void 0===vt&&"function"==typeof require?function(){try{var t=require("vertx");return t.runOnLoop||t.runOnContext,function(){vertxNext(A)}}catch(t){return x()}}:x)();if(j.async=at,"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var kt=window.__PROMISE_INSTRUMENTATION__;for(var xt in t("instrument",!0),kt)kt.hasOwnProperty(xt)&&S(xt,kt[xt])}var At={race:z,Promise:B,allSettled:$,hash:tt,hashSettled:et,denodeify:F,on:S,off:function(){j.off.apply(j,arguments)},map:ot,filter:st,resolve:it,reject:ut,all:Q,rethrow:nt,defer:rt,EventTarget:T,configure:t,async:function(t,e){j.async(t,e)}};"function"==typeof define&&define.amd?define(function(){return At}):"undefined"!=typeof module&&module.exports?module.exports=At:void 0!==this&&(this.RSVP=At)}).call(this),function(t,n){"use strict";function u(n){return r=n.url,new RSVP.Promise(function(t,e){var n=new XMLHttpRequest;n.open("GET",r),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||0===n.status&&n.responseText?t({content:n.responseText,type:n.getResponseHeader("content-type")}):e(new Error(n.statusText)))},setTimeout(function(){n.readyState<4&&n.abort()},basket.timeout),n.send()}).then(function(t){var e=l(n,t);return n.skipCache||f(n.key,e),e});var r}function r(t){var e,n,r,o,i;if(t.url)return t.key=t.key||t.url,e=basket.get(t.key),t.execute=!1!==t.execute,i=t,r=!(o=e)||o.expire-new Date<0||i.unique!==o.unique||basket.isValidItem&&!basket.isValidItem(o,i),t.live||r?(t.unique&&(t.url+=(0<t.url.indexOf("?")?"&":"?")+"basket-unique="+t.unique),n=u(t),t.live&&!r&&(n=n.then(function(t){return t},function(){return e}))):(e.type=t.type||e.originalType,e.execute=t.execute,n=new RSVP.Promise(function(t){t(e)})),n}function o(t){return t.map(function(t){return t.execute&&((e=t).type&&h[e.type]?h[e.type](e):h.default(e)),t;var e})}function i(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(r(arguments[e]));return RSVP.all(t)}var s=n.getElementById("cached-js"),a="basket-",c=[],f=function(e,n){try{return localStorage.setItem(a+e,JSON.stringify(n)),!0}catch(t){if(0<=t.name.toUpperCase().indexOf("QUOTA")){var r,o=[];for(r in localStorage)0===r.indexOf(a)&&o.push(JSON.parse(localStorage[r]));return o.length?(o.sort(function(t,e){return t.stamp-e.stamp}),basket.remove(o[0].key),f(e,n)):void 0}return}},l=function(t,e){var n=+new Date;return t.data=e.content,t.originalType=e.type,t.type=t.type||e.type,t.skipCache=t.skipCache||!1,t.stamp=n,t.expire=n+60*(t.expire||5e3)*60*1e3,t},h={default:function(t){var e=n.createElement("script");e.defer=!0,e.text=t.data,s.appendChild(e)}},p=function(){var t=i.apply(null,arguments),e=this.then(function(){return t}).then(o);return e.thenRequire=p,e};t.basket={require:function(){for(var t=0,e=arguments.length;t<e;t++)arguments[t].execute=!1!==arguments[t].execute,arguments[t].once&&0<=c.indexOf(arguments[t].url)?arguments[t].execute=!1:!1!==arguments[t].execute&&c.indexOf(arguments[t].url)<0&&c.push(arguments[t].url);var n=i.apply(null,arguments).then(o);return n.thenRequire=p,n},remove:function(t){return localStorage.removeItem(a+t),this},get:function(t){var e=localStorage.getItem(a+t);try{return JSON.parse(e||"false")}catch(t){return!1}},clear:function(t){var e,n,r=+new Date;for(e in localStorage)(n=e.split(a)[1])&&(!t||this.get(n).expire<=r)&&this.remove(n);return this},isValidItem:null,timeout:5e3,addHandler:function(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(t){h[t]=e})},removeHandler:function(t){basket.addHandler(t,void 0)}},basket.clear(!0)}(this,document);